<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Tests</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        
        #main-container {
            height: 100vh;
        }
        
        .left-content {
            padding: 20px;
            height: 100%;
            box-sizing: border-box;
            overflow: auto;
        }
        
        .right-content {
            padding: 20px;
            height: 100%;
            box-sizing: border-box;
            overflow: auto;
        }
        
        .control {
            background: white;
            border: 1px solid #ddd;
            border-radius: 0;
            padding: 8px 12px;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            border-bottom: none;
        }
        
        .control:last-child {
            border-bottom: 1px solid #ddd;
        }
        
        .control label {
            min-width: 70px;
            font-weight: bold;
        }
        
        .inputs {
            display: flex;
            gap: 3px;
            margin-left: auto;
            width: 180px;
        }
        
        .inputs input {
            width:30px;
            flex: 1;
            padding: 4px 6px;
            border: 1px solid #ccc;
            border:none;
            background-color: aliceblue;
            border-radius: 3px;
        }
        
        input[type="range"] {
            width: 120px;
            margin: 0;
        }
        
        .output {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 10px;
            margin: 0;
            font-family: monospace;
            white-space: pre-line;
            height: 300px;
            overflow-y: auto;
        }
        
        h1 {
            color: #333;
        }
        
        .test-section {
            margin: 15px 0;
        }
        
        #multi-controls {
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="main-container"></div>
    
    <script type="module">
        import { createMultiControl, createSliderControl } from './goei/control.js';
        import { SplitPane } from './splitpane/splitpane.js';
        
        // Create split pane
        const mainContainer = document.getElementById('main-container');
        const split = new SplitPane(mainContainer, {
            orientation: 'horizontal',
            splitRatio: 0.3,
            minSize: 200,
            panel1: { title: 'Controls Menu' },
            panel2: { title: 'Output' }
        });
        
        // Get content areas
        const leftPanel = split.getPanel(1);
        const rightPanel = split.getPanel(2);
        
        // Create left panel content
        const leftContent = document.createElement('div');
        leftContent.className = 'left-content';
        leftContent.innerHTML = `
            <h1>Control Tests</h1>
            <div class="test-section">
                <h2>Multi Controls</h2>
                <div id="multi-controls"></div>
            </div>
            <div class="test-section">
                <h2>Slider Controls</h2>
                <div id="slider-controls"></div>
            </div>
        `;
        leftPanel.appendChild(leftContent);
        
        // Create right panel content
        const rightContent = document.createElement('div');
        rightContent.className = 'right-content';
        rightContent.innerHTML = `
            <h1>Output</h1>
            <div class="output" id="output">Events will appear here...</div>
        `;
        rightPanel.appendChild(rightContent);
        
        const output = document.getElementById('output');
        const log = (msg) => {
            output.textContent = new Date().toLocaleTimeString() + ': ' + msg + '\n' + output.textContent;
        };
        
        // Multi Controls
        const multiContainer = document.getElementById('multi-controls');
        
        const positionControl = createMultiControl({
            label: 'Position',
            values: [10, 20, 30,90],
            onChange: (vals) => log(`Position changed: [${vals.join(', ')}]`),
            onRightClick: (e) => log('Position right-clicked'),
            onLeftClick: (e) => log('Position left-clicked'),
            onValueClick: (e, index, value) => log(`Position value ${index} clicked: ${value}`)
        });
        
        const name = createMultiControl({
            label: 'name',
            values: ["Jonathan"]
        });
        

        const colorControl = createMultiControl({
            label: 'RGB Color',
            values: [255, 128, 64],
            onChange: (vals) => log(`Color changed: rgb(${vals.join(', ')})`),
            onValueClick: (e, index, value) => log(`Color channel ${index} clicked`)
        });
        
        const nameControl = createMultiControl({
            label: 'Name Parts',
            values: ['John', 'Doe'],
            onChange: (vals) => log(`Name changed: ${vals.join(' ')}`),
        });
        
        const fullWidthInputs = createMultiControl({
            label: '',  // No label - full width
            values: [1.5, 2.0, 3.14],
            onChange: (vals) => log(`Full width values: [${vals.join(', ')}]`),
        });
        
        multiContainer.appendChild(name);
        multiContainer.appendChild(positionControl);

        multiContainer.appendChild(colorControl);
        multiContainer.appendChild(nameControl);
        multiContainer.appendChild(fullWidthInputs);
        
        // Slider Controls
        const sliderContainer = document.getElementById('slider-controls');
        
        const opacitySlider = createSliderControl({
            label: 'Opacity',
            value: 50,
            min: 0,
            max: 100,
            onChange: (val) => log(`Opacity: ${val}%`)
        });
        
        const volumeSlider = createSliderControl({
            label: 'Volume',
            value: 75,
            min: 0,
            max: 100,
            onChange: (val) => log(`Volume: ${val}`)
        });
        
        const temperatureSlider = createSliderControl({
            label: 'Temperature',
            value: 20,
            min: -10,
            max: 50,
            onChange: (val) => log(`Temperature: ${val}Â°C`)
        });
        
        const fullWidthSlider = createSliderControl({
            label: '',  // No label - full width
            value: 33,
            min: 0,
            max: 100,
            onChange: (val) => log(`Full width slider: ${val}`)
        });
        
        sliderContainer.appendChild(opacitySlider);
        sliderContainer.appendChild(volumeSlider);
        sliderContainer.appendChild(temperatureSlider);
        sliderContainer.appendChild(fullWidthSlider);
        
        // Test update methods after 3 seconds
        setTimeout(() => {
            log('--- Testing update methods ---');
            positionControl.updateValues([100, 200, 300]);
            opacitySlider.updateValue(25);
            fullWidthInputs.updateValues([99.9, 88.8, 77.7]);
            fullWidthSlider.updateValue(75);
            log('Controls updated programmatically');
        }, 3000);
        
        log('Test page loaded - try interacting with the controls!');
    </script>
</body>
</html>
