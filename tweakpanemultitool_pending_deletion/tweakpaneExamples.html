<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tweakpane 4.0.4 - Enhanced Features Examples</title>
    <script type="module">
        // THIS SECTION GENERATED BY Claude - Import Tweakpane as ES module
        import { Pane } from './tweakpane-4.0.4_modified.js';
        
        // Wait for DOM then initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeTweakpaneExamples(Pane);
        });
        
        function initializeTweakpaneExamples(Pane) {
            // THIS SECTION GENERATED BY Claude - Interactive examples
            
            // Initialize Tweakpane
            const pane = new Pane({
                container: document.getElementById('tweakpane-container'),
                title: 'Live Examples'
            });

            // Example data objects
            const exampleData = {
                
                
                position2d: { x: 50, y: 25 },
                position3d: { x: 0, y: 0, z: 0 },
                position4d: { x: 0, y: 0, z: 0, w: 1 },
                
                color: { r: 128, g: 255, b: 64 },
                intensity: 1.0,
                testFloat: 3.14159,
                enabled: true
            };

            // 1. Multiline Text Examples - THIS SECTION GENERATED BY Claude
            const textFolder = pane.addFolder({
                title: 'Text Controls',
                expanded: true
            });

            // Test simple text blade first
            try {
                console.log('Attempting to create text blade...');
                const descriptionControl = textFolder.addBlade({
                    view: 'text',
                    label: 'Description',
                    value: 'Simple text test',
                    parse: (v) => String(v)
                });
                console.log('Basic text blade created successfully');
                
                // If basic works, try multiline
                const codeControl = textFolder.addBlade({
                    view: 'text',                    
                    multiline: true,
                    lines: 4,
                    wordwrap: false,
                    value: 'function test() {\n  return "Hello";\n}',
                    parse: (v) => String(v)
                });
                console.log('Multiline text blade created successfully');
                
                // Event handlers
                descriptionControl.on('change', (ev) => {
                    exampleData.description = ev.value;
                    console.log('Description updated');
                });

                codeControl.on('change', (ev) => {
                    exampleData.codeExample = ev.value;
                    console.log('Code updated');
                });
                
            } catch (error) {
                console.error('Text blade creation failed:', error);
                
                // Fallback: try simple string binding
                const fallbackObject = { text: 'Fallback text input' };
                textFolder.addBinding(fallbackObject, 'text', {
                    label: 'Fallback Text'
                });
                console.log('Using fallback text binding');
            }

            // 2. Vector Controls - THIS SECTION GENERATED BY Claude
            const vectorFolder = pane.addFolder({
                title: 'Vector Controls',
                expanded: true
            });

            // 2D Vector - Standard binding
            vectorFolder.addBinding(exampleData, 'position2d', {                label: '2D Position'            });
            vectorFolder.addBinding(exampleData, 'position3d', {                label: '3D Position'            });
            vectorFolder.addBinding(exampleData, 'position4d', {                label: '4D Position'            });            

            // 3. Expandable Folder Demo - THIS SECTION GENERATED BY Claude
            console.log('Creating expandable folder...');
            
            // Object that will hold dynamically added properties
            const dynamicObject = {
                baseProperty: 42,
                existingVector: { x: 1, y: 2, z: 3 },
                existingColor: { r: 255, g: 128, b: 64 }
            };
            
            try {
                const expandableFolder = pane.addExpandableFolder({
                    title: 'Dynamic Properties',
                    target: dynamicObject,
                    onChange: (name, value, type) => {
                        console.log(`Property "${name}" changed:`, value, `(type: ${type})`);
                        // THIS SECTION GENERATED BY Claude - Trigger immediate live display update
                        updateLiveDisplay();
                    },
                    onControlChange: (controlInfo) => {
                        // THIS SECTION GENERATED BY Claude - Debug control changes
                        console.log('Control changed:', controlInfo);
                        console.log('Current control order:', Object.keys(dynamicObject));
                        updateLiveDisplay();
                    },
                    configTypes: {
                        float: 0.0,
                        bool: false,
                        vec2: { x: 0, y: 0 },
                        vec3: { x: 0, y: 0, z: 0 },
                        color: { r: 255, g: 255, b: 255 },
                        string: 'New Property'
                    }
                });
                
                console.log('Expandable folder created successfully!');
                console.log('Target object:', dynamicObject);
                
            } catch (error) {
                console.error('addExpandableFolder failed:', error);
                
                // Fallback: Create a regular folder with manual add button
                const fallbackFolder = pane.addFolder({
                    title: 'Dynamic Properties (Fallback)',
                    expanded: true
                });
                
                fallbackFolder.addBinding(dynamicObject, 'baseProperty');
                fallbackFolder.addBinding(dynamicObject, 'existingVector');
                fallbackFolder.addBinding(dynamicObject, 'existingColor');
                
                console.log('Using fallback dynamic folder');
            }
            
            // THIS SECTION GENERATED BY Claude - Live display update function
            function updateLiveDisplay() {
                // Update dynamic object display
                const dynamicDisplay = document.getElementById('dynamic-object-display');
                if (dynamicDisplay) {
                    const dynamicInfo = {
                        properties: dynamicObject,
                        propertyCount: Object.keys(dynamicObject).length,
                        propertyTypes: {}
                    };
                    
                    // Add type information for each property
                    for (const [key, value] of Object.entries(dynamicObject)) {
                        if (typeof value === 'object' && value !== null) {
                            if ('x' in value && 'y' in value && 'z' in value) {
                                dynamicInfo.propertyTypes[key] = 'vec3';
                            } else if ('x' in value && 'y' in value) {
                                dynamicInfo.propertyTypes[key] = 'vec2';
                            } else if ('r' in value && 'g' in value && 'b' in value) {
                                dynamicInfo.propertyTypes[key] = 'color';
                            } else {
                                dynamicInfo.propertyTypes[key] = 'object';
                            }
                        } else {
                            dynamicInfo.propertyTypes[key] = typeof value;
                        }
                    }
                    
                    dynamicDisplay.textContent = JSON.stringify(dynamicInfo, null, 2);
                }
                
                // Update example data display
                const exampleDisplay = document.getElementById('example-data-display');
                if (exampleDisplay) {
                    const exampleInfo = {
                        properties: exampleData,
                        propertyCount: Object.keys(exampleData).length
                    };
                    exampleDisplay.textContent = JSON.stringify(exampleInfo, null, 2);
                }
            }
            
            // Start live updates - update every 500ms
            updateLiveDisplay(); // Initial update
            setInterval(updateLiveDisplay, 500);
            
            // 4. Various Controls
            const controlsFolder = pane.addFolder({
                title: 'Other Controls',
                expanded: true
            });

            controlsFolder.addBinding(exampleData, 'color');
            controlsFolder.addBinding(exampleData, 'intensity', {
                min: 0, max: 2, step: 0.1
            });
            // Test float control without step (should allow free-form input)
            controlsFolder.addBinding(exampleData, 'testFloat', {
                label: 'Test Float (no step)'
            });
            controlsFolder.addBinding(exampleData, 'enabled');

            // THIS SECTION GENERATED BY Claude - Add event listeners for immediate updates
            pane.on('change', () => {
                updateLiveDisplay();
            });

            // 5. Action Buttons & Advanced Blades - THIS SECTION GENERATED BY Claude
            const actionsFolder = pane.addFolder({
                title: 'Actions & Advanced',
                expanded: true
            });

            // Simple button implementation (tabs might not be available)
            const resetButton = actionsFolder.addBlade({
                view: 'button',
                title: 'Reset All Values'
            });













            resetButton.on('click', () => {
                exampleData.position2d = { x: 0, y: 0 };
                exampleData.position3d = { x: 0, y: 0, z: 0 };
                exampleData.rotation4d = { x: 0, y: 0, z: 0, w: 1 };
                exampleData.intensity = 1.0;
                exampleData.enabled = true;
                pane.refresh();
                console.log('Values reset!');
            });
            
            const randomizeButton = actionsFolder.addBlade({
                view: 'button',
                title: 'Randomize Values'
            });
            
            randomizeButton.on('click', () => {
                exampleData.position2d.x = Math.random() * 200 - 100;
                exampleData.position2d.y = Math.random() * 200 - 100;
                exampleData.position3d.x = Math.random() * 200 - 100;
                exampleData.position3d.y = Math.random() * 200 - 100;
                exampleData.position3d.z = Math.random() * 200 - 100;
                exampleData.intensity = Math.random() * 2;
                pane.refresh();
                console.log('Values randomized!');
            });

            const logButton = actionsFolder.addBlade({
                view: 'button',
                title: 'Log Current Values'
            });

            logButton.on('click', () => {
                console.log('Current values:', JSON.stringify(exampleData, null, 2));
            });

            // THIS SECTION GENERATED BY Claude - Show expandable folder contents
            const showExpandableButton = actionsFolder.addBlade({
                view: 'button',
                title: 'Show Expandable Folder Contents'
            });

            showExpandableButton.on('click', () => {
                console.log('=== Expandable Folder Object Contents ===');
                console.log('Dynamic Object:', JSON.stringify(dynamicObject, null, 2));
                console.log('Object keys:', Object.keys(dynamicObject));
                console.log('Property count:', Object.keys(dynamicObject).length);
                
                // Show each property with its type
                console.log('Property details:');
                for (const [key, value] of Object.entries(dynamicObject)) {
                    console.log(`  ${key}: ${JSON.stringify(value)} (type: ${typeof value})`);
                }
                
                // Also display in a nice alert for easy viewing
                const objectDisplay = Object.entries(dynamicObject)
                    .map(([key, value]) => `${key}: ${JSON.stringify(value)}`)
                    .join('\n');
                
                alert(`Expandable Folder Contents:\n\n${objectDisplay}\n\nSee console for detailed output.`);
            });

            console.log('Tweakpane 4.0.4 Examples loaded!');
            console.log('Right-click any control to see context menu options');
            
            // THIS SECTION GENERATED BY Claude - Debug available features
            console.log('Available Tweakpane features:');
            console.log('- Pane:', typeof Pane);
            
            // Test context menu availability
            setTimeout(() => {
                console.log('To test context menu: Right-click any control in the left panel');
                console.log('If context menu appears, the feature is working!');
            }, 2000);
        }
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .controls-section {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .controls-panel {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            height: fit-content;
        }
        .content-panel {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
        }
        h1, h2, h3 {
            color: #4CAF50;
        }
        .example-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #333;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .code-snippet {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        .feature-demo {
            background: #444;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .note {
            background: #2d5016;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid #4CAF50;
            margin: 10px 0;
        }
        /* THIS SECTION GENERATED BY Claude - Live display styles */
        .live-display {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #4CAF50;
            height: fit-content;
        }
        .live-display h3 {
            margin-top: 0;
            color: #4CAF50;
            font-size: 16px;
        }
        .live-display h4 {
            color: #81C784;
            font-size: 14px;
            margin: 10px 0 5px 0;
        }
        .object-display pre {
            background: #0d1117;
            color: #f0f6fc;
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            overflow-x: auto;
            margin: 5px 0;
            white-space: pre-wrap;
            border: 1px solid #30363d;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- THIS SECTION GENERATED BY Claude - Two column controls section -->
        <div class="controls-section">
            <!-- Controls Panel -->
            <div class="controls-panel">
                <h2>Interactive Controls</h2>
                <div id="tweakpane-container"></div>
            </div>

            <!-- Live Object Display Panel -->
            <div class="live-display">
                <h3>Live Object Contents</h3>
                <div class="object-display">
                    <h4>Expandable Folder Object:</h4>
                    <pre id="dynamic-object-display"></pre>
                    
                    <h4>Example Data Object:</h4>
                    <pre id="example-data-display"></pre>
                </div>
            </div>
        </div>

        <!-- Content Panel - Below the fold -->
        <div class="content-panel">
            <h1>Tweakpane 4.0.4 - Enhanced Features Guide</h1>
            <p>This example demonstrates the new features added to Tweakpane 4.0.4:</p>

            <!-- Multiline Text Fields -->
            <div class="example-section">
                <h3>1. Multiline Text Fields with addBlade</h3>
                <p>Create multiline text areas with customizable properties using the <code>addBlade</code> method.</p>
                
                <div class="code-snippet">// Basic multiline text field
const textControl = pane.addBlade({
    view: 'text',
    label: 'Description',
    multiline: true,
    lines: 5,
    wordwrap: true,
    value: 'Enter your text here...'
});

// Advanced multiline with no word wrap
const codeControl = pane.addBlade({
    view: 'text',
    label: 'Code',
    multiline: true,
    lines: 10,
    wordwrap: false,
    value: 'function example() {\n  return "Hello World";\n}'
});</div>

                <div class="note">
                    <strong>Properties:</strong>
                    <ul>
                        <li><code>multiline: true</code> - Enables textarea instead of input</li>
                        <li><code>lines: number</code> - Sets height in lines</li>
                        <li><code>wordwrap: boolean</code> - Controls text wrapping</li>
                        <li><code>parse: function</code> - Custom parsing function</li>
                    </ul>
                </div>
            </div>

            <!-- Vector Sliders -->
            <div class="example-section">
                <h3>2. Vector Slider Popups (Point2d, Point3d, Point4d)</h3>
                <p>Interactive vector controls with popup sliders for 2D, 3D, and 4D vectors.</p>
                
                <div class="code-snippet">// 2D Vector (Point2d)
const position2d = { x: 0, y: 0 };
pane.addBinding(position2d, 'x');
pane.addBinding(position2d, 'y');

// 3D Vector (Point3d) - Enhanced with popup
const position3d = { x: 0, y: 0, z: 0 };
const point3dControl = pane.addBinding(position3d, 'position3d');

// 4D Vector (Point4d) - For quaternions, RGBA, etc.
const rotation4d = { x: 0, y: 0, z: 0, w: 1 };
const point4dControl = pane.addBinding(rotation4d, 'rotation4d');</div>

                <div class="note">
                    <strong>Features:</strong>
                    <ul>
                        <li>Click vector button to open popup with individual sliders</li>
                        <li>Real-time value updates</li>
                        <li>Keyboard navigation support</li>
                        <li>Customizable ranges and step values</li>
                    </ul>
                </div>
            </div>

            <!-- Folders -->
            <div class="example-section">
                <h3>3. Folders for Organization</h3>
                <p>Group related controls into collapsible folders for better organization.</p>
                
                <div class="code-snippet">// Create folders using addFolder or addBlade
const transformFolder = pane.addFolder({
    title: 'Transform',
    expanded: true
});

// Add controls to folder
transformFolder.addBinding(object, 'position');
transformFolder.addBinding(object, 'rotation');
transformFolder.addBinding(object, 'scale');

// Nested folders
const advancedFolder = transformFolder.addFolder({
    title: 'Advanced',
    expanded: false
});

// Alternative using addBlade
const materialFolder = pane.addBlade({
    view: 'folder',
    title: 'Material Properties',
    expanded: true
});</div>

                <div class="note">
                    <strong>Properties:</strong>
                    <ul>
                        <li><code>title: string</code> - Folder display name</li>
                        <li><code>expanded: boolean</code> - Initial state</li>
                        <li>Supports nesting for complex hierarchies</li>
                        <li>Automatic height calculation</li>
                    </ul>
                </div>
            </div>

            <!-- Context Menu -->
            <div class="example-section">
                <h3>4. Context Menu System</h3>
                <p>Right-click on controls to access context menus with advanced options.</p>
                
                <div class="code-snippet">// Context menu is automatically enabled for all controls
// Right-click any control to see options:

// Example of what you can do:
// - Rename controls
// - Delete controls  
// - Duplicate controls
// - Change control types
// - Add new properties dynamically
// - Reset to default values

// The context menu system provides:
const contextMenuFeatures = {
    rename: 'Change control labels',
    delete: 'Remove controls',
    duplicate: 'Copy existing controls',
    convert: 'Change control types',
    addProperty: 'Add new properties to objects',
    reset: 'Reset values to defaults'
};</div>

                <div class="note">
                    <strong>Context Menu Features:</strong>
                    <ul>
                        <li>Right-click any control for options</li>
                        <li>Rename control labels on-the-fly</li>
                        <li>Delete unwanted controls</li>
                        <li>Add properties dynamically to objects</li>
                        <li>Convert between control types</li>
                        <li>Reset values to defaults</li>
                    </ul>
                </div>
            </div>

            <!-- Expandable Folder -->
            <div class="example-section">
                <h3>5. Expandable Folders (addExpandableFolder)</h3>
                <p>Dynamic folders that allow users to add properties at runtime with a "+" button.</p>
                
                <div class="code-snippet">// Create an expandable folder
const dynamicObject = {
    baseProperty: 42,
    existingVector: { x: 1, y: 2, z: 3 }
};

const expandableFolder = pane.addExpandableFolder({
    title: 'Dynamic Properties',
    target: dynamicObject,
    onChange: (name, value, type) => {
        console.log(`Property "${name}" changed:`, value, `(type: ${type})`);
    },
    configTypes: {
        float: 0.0,
        int: 0,
        bool: false,
        vec2: { x: 0, y: 0 },
        vec3: { x: 0, y: 0, z: 0 },
        color: { r: 255, g: 255, b: 255 },
        string: 'New Property'
    }
});</div>

                <div class="note">
                    <strong>Features:</strong>
                    <ul>
                        <li>Automatically detects and binds existing properties</li>
                        <li>Click "+" button in folder header to add new properties</li>
                        <li>Choose from predefined types (float, int, bool, vec2, vec3, color)</li>
                        <li>Properties get appropriate controls (sliders, checkboxes, etc.)</li>
                        <li>onChange callback fires when properties are modified</li>
                        <li>Context menu on properties for advanced editing</li>
                    </ul>
                </div>
            </div>

            <!-- Blade Types -->
            <div class="example-section">
                <h3>6. Enhanced Blade System</h3>
                <p>Multiple blade types for different UI elements.</p>
                
                <div class="code-snippet">// Button blade
const actionButton = pane.addBlade({
    view: 'button',
    title: 'Execute Action',
    label: 'Actions'
});
actionButton.on('click', () => console.log('Button clicked!'));

// Text blade (multiline)
const notesField = pane.addBlade({
    view: 'text',
    label: 'Notes',
    multiline: true,
    lines: 8,
    value: 'Project notes and comments...'
});

// Tab blade for complex layouts
const tabSet = pane.addBlade({
    view: 'tab',
    pages: [
        {title: 'Basic'},
        {title: 'Advanced'},
        {title: 'Debug'}
    ]
});</div>

                <div class="note">
                    <strong>Available Blade Views:</strong>
                    <ul>
                        <li><code>button</code> - Clickable action buttons</li>
                        <li><code>text</code> - Single/multiline text inputs</li>
                        <li><code>folder</code> - Collapsible containers</li>
                        <li><code>tab</code> - Tabbed interfaces</li>
                    </ul>
                </div>
            </div>

            <!-- Integration Tips -->
            <div class="example-section">
                <h3>7. Integration Tips</h3>
                <div class="code-snippet">// THIS SECTION GENERATED BY Claude
// Best practices for using enhanced Tweakpane features:

// 1. Organize with folders
const sceneFolder = pane.addFolder({title: 'Scene'});
const lightingFolder = pane.addFolder({title: 'Lighting'});
const materialsFolder = pane.addFolder({title: 'Materials'});

// 2. Use appropriate input types
const settings = {
    description: 'Scene description...',
    position: {x: 0, y: 0, z: 0},
    color: {r: 255, g: 255, b: 255, a: 255}
};

// 3. Leverage context menus for user customization
// Users can right-click to modify the interface

// 4. Combine with change events
textControl.on('change', (ev) => {
    console.log('Text changed:', ev.value);
});

// 5. Use vector controls for coordinates, colors, etc.
const vectorControl = pane.addBinding(settings, 'position');
vectorControl.on('change', (ev) => {
    updateObjectPosition(ev.value);
});</div>
            </div>
        </div>
    </div>
</body>
</html>